# メーカー管理・商品管理機能 - ユーザーガイド

**Last Updated**: 2025-11-12 01:31 JST

## 概要

メーカー管理機能と商品管理機能は、家計簿で使用するメーカーと商品を管理するための機能です。データを削除せずに非表示にする「IS_DISABLED機能」を搭載しています。

---

## 基本機能

### メーカー管理

メーカー（製造元・ブランド）を管理します。

**主な機能:**
- メーカーの追加・編集・削除
- メモ欄による詳細情報の記録
- 非表示設定による柔軟な管理

### 商品管理

商品（アイテム）を管理します。メーカーとの関連付けも可能です。

**主な機能:**
- 商品の追加・編集・削除
- メーカーとの関連付け（任意）
- メモ欄による詳細情報の記録
- 非表示設定による柔軟な管理

---

## IS_DISABLED機能（非表示機能）

### 概要

IS_DISABLED機能は、データを完全に削除せず、一時的に非表示にできる機能です。

### 使い方

#### 1. 非表示項目の設定

**新規追加時:**
1. 「メーカーを追加」または「商品を追加」ボタンをクリック
2. 必要な情報を入力
3. 「非表示」チェックボックスをオンにする
4. 「保存」をクリック

**編集時:**
1. 対象のメーカー/商品の「編集」ボタンをクリック
2. 「非表示」チェックボックスをオン/オフ
3. 「保存」をクリック

#### 2. 非表示項目の表示/非表示切り替え

画面上部のトグルボタンで、非表示項目の表示/非表示を切り替えられます。

- **「非表示項目を表示」**: 非表示項目を含めて表示
- **「非表示項目を隠す」**: 有効な項目のみ表示（デフォルト）

#### 3. 非表示項目の視覚的表示

非表示に設定された項目は、以下の特徴で区別できます：

- **背景色**: ダークグレー (#6c757d)
- **テキスト色**: 白 (#ffffff)
- **バッジ**: 黄色の「[非表示]」ラベル表示
- **操作ボタン**: 通常通り表示（編集・削除可能）

### 削除機能との違い

| 操作 | データの扱い | 用途 | 可逆性 |
|------|-------------|------|--------|
| **非表示** | データは保持される | 一時的に使わない項目 | 簡単に再表示可能 |
| **削除** | IS_DISABLEDが1に設定 | 使わなくなった項目 | リスト上は非表示 |

> **注意**: 「削除」ボタンは論理削除（IS_DISABLED=1に設定）を行います。データベースからは削除されません。

### 活用例

#### 季節商品の管理
```
例: 「冷やし中華」
夏: 非表示OFF（有効） → リストに表示
冬: 非表示ON → リストから非表示
春: 非表示OFF → 再びリストに表示
```

#### 試用期間のメーカー
```
例: 「新規メーカーA」
試用中: 非表示OFF（有効）
試用終了（不採用）: 非表示ON
再検討時: 非表示OFF → データはそのまま利用可能
```

#### 過去の取引先
```
例: 「取引終了メーカー」
取引中: 非表示OFF（有効）
取引終了: 削除 → IS_DISABLED=1（データは保持）
履歴参照: 「非表示項目を表示」で確認可能
```

---

## 操作ガイド

### メーカーの追加

1. 「メーカーを追加」ボタンをクリック
2. **メーカー名**: 必須項目（例: ニッスイ）
3. **メモ**: 任意（例: 日本水産株式会社）
4. **非表示**: 必要に応じてチェック
5. 「保存」をクリック

### メーカーの編集

1. 対象メーカーの「編集」ボタンをクリック
2. 必要な項目を修正
3. 「保存」をクリック

### メーカーの削除

1. 対象メーカーの「削除」ボタンをクリック
2. 確認ダイアログで「削除」をクリック

> **注意**: 削除されたメーカーは IS_DISABLED=1 に設定されます（論理削除）

### 商品の追加

1. 「商品を追加」ボタンをクリック
2. **商品名**: 必須項目（例: サバ缶）
3. **メーカー**: 任意（ドロップダウンから選択）
4. **メモ**: 任意（例: 水煮）
5. **非表示**: 必要に応じてチェック
6. 「保存」をクリック

### 商品の編集

1. 対象商品の「編集」ボタンをクリック
2. 必要な項目を修正
3. 「保存」をクリック

### 商品の削除

1. 対象商品の「削除」ボタンをクリック
2. 確認ダイアログで「削除」をクリック

> **注意**: 削除された商品は IS_DISABLED=1 に設定されます（論理削除）

---

## データの関連性

### メーカーと商品の関係

- 商品にはメーカーを関連付けることができます（任意）
- メーカーが非表示/削除されても、商品データは保持されます
- 非表示メーカーに関連付けられた商品は、リストビューでメーカー名が表示されません

### 表示順序

- メーカー・商品は `DISPLAY_ORDER` で自動的にソートされます
- 追加順に表示されます

---

## バリデーションルール

### メーカー

| 項目 | ルール |
|------|--------|
| メーカー名 | 必須、空白不可、重複不可 |
| メモ | 任意 |
| 非表示 | 0（有効）または 1（非表示） |

### 商品

| 項目 | ルール |
|------|--------|
| 商品名 | 必須、空白不可、重複不可 |
| メーカー | 任意 |
| メモ | 任意 |
| 非表示 | 0（有効）または 1（非表示） |

---

## よくある質問（FAQ）

### Q1: 削除したデータは復元できますか？

**A**: はい、削除は論理削除です。「非表示項目を表示」ボタンで表示し、編集画面で「非表示」チェックを外せば復元できます。

### Q2: 非表示と削除の違いは何ですか？

**A**: 
- **非表示**: 手動でチェックボックスをオン/オフ
- **削除**: 削除ボタンで実行（自動的に非表示に設定）

どちらもデータは保持され、復元可能です。

### Q3: メーカーを削除すると、関連する商品も削除されますか？

**A**: いいえ、商品は削除されません。ただし、非表示メーカーの商品はリストビューでメーカー名が表示されなくなります。

### Q4: 非表示項目は検索対象になりますか？

**A**: いいえ、「非表示項目を表示」がオフの場合、非表示項目は検索結果に含まれません。

### Q5: 完全にデータを削除することはできますか？

**A**: 現在のバージョンでは、UI上から物理削除はできません。データベースから直接削除する必要があります。

---

## トラブルシューティング

### 問題: 非表示項目が表示されない

**解決策**: 
1. 「非表示項目を表示」ボタンをクリックしていることを確認
2. 画面を再読み込み（他の画面に移動してから戻る）
3. データベース接続を確認

### 問題: 削除できない

**解決策**:
1. 対象項目が存在することを確認
2. ログインユーザーが正しいことを確認
3. エラーメッセージを確認

### 問題: メーカー名/商品名が重複している

**解決策**:
- 既存の名前と異なる名前を入力してください
- 非表示項目を含めて重複チェックされます

---

## 関連ドキュメント

- [IS_DISABLED実装ガイド（開発者向け）](./IS_DISABLED_IMPLEMENTATION_GUIDE.md)
- [メーカー管理 API仕様](./API_MANUFACTURER.md)
- [商品管理 API仕様](./API_PRODUCT.md)
- [データベース設計](./DATABASE_CONFIGURATION.md)

---

**変更履歴**
- 2025-11-12: 初版作成
